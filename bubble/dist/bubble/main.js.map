{"version":3,"sources":["./$_lazy_route_resource lazy namespace object","./src/app/app-routing.module.ts","./src/app/app.component.ts","./src/app/app.component.html","./src/app/app.module.ts","./src/app/home/home.component.ts","./src/app/home/home.component.html","./src/app/model/PeerData.model.ts","./src/app/services/rtc.service.ts","./src/app/services/rtc2.service.ts","./src/app/services/websocket.service.ts","./src/environments/environment.ts","./src/main.ts"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { HomeComponent } from './home/home.component';\r\n\r\nconst routes: Routes = [\r\n  { path: '', component: HomeComponent },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forRoot(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class AppRoutingModule { }\r\n","import { Component } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'bbl-root',\r\n  templateUrl: './app.component.html',\r\n  styleUrls: ['./app.component.scss']\r\n})\r\nexport class AppComponent {\r\n  title = 'bubble';\r\n}\r\n","<mat-toolbar color=\"primary\">\r\n  Bubble!\r\n\r\n  <button mat-flat-button color=\"primary\" [routerLink]=\"['']\"><mat-icon>home</mat-icon></button>\r\n</mat-toolbar>\r\n\r\n<div id=\"page-container\">\r\n  <router-outlet></router-outlet>\r\n</div>\r\n","import { BrowserModule } from '@angular/platform-browser';\r\nimport { NgModule } from '@angular/core';\r\n\r\nimport { AppRoutingModule } from './app-routing.module';\r\nimport { AppComponent } from './app.component';\r\nimport { HomeComponent } from './home/home.component';\r\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\r\n\r\nimport { MatToolbarModule } from '@angular/material/toolbar';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatSlideToggleModule } from '@angular/material/slide-toggle';\r\nimport { MatGridListModule } from '@angular/material/grid-list';\r\nimport { MatChipsModule } from '@angular/material/chips';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { MatInputModule } from '@angular/material/input';\r\nimport { ReactiveFormsModule, FormsModule } from '@angular/forms';\r\nimport { HttpClientModule } from '@angular/common/http';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AppComponent,\r\n    HomeComponent,\r\n  ],\r\n  imports: [\r\n    BrowserModule,\r\n    AppRoutingModule,\r\n    BrowserAnimationsModule,\r\n    MatToolbarModule,\r\n    MatButtonModule,\r\n    MatIconModule,\r\n    MatSlideToggleModule,\r\n    MatGridListModule,\r\n    MatChipsModule,\r\n    MatFormFieldModule,\r\n    ReactiveFormsModule,\r\n    FormsModule,\r\n    MatInputModule,\r\n    HttpClientModule,\r\n  ],\r\n  providers: [],\r\n  bootstrap: [AppComponent]\r\n})\r\nexport class AppModule { }\r\n","import { Component, HostListener, OnInit } from '@angular/core';\r\nimport { RtcService } from '../services/rtc.service';\r\nimport { Rtc2Service } from '../services/rtc2.service';\r\nimport { WebsocketService } from '../services/websocket.service';\r\nimport { Tile } from '../model/Tile.model';\r\nimport { Bubble } from '../model/Bubble.model';\r\nimport { CdkDragDrop, moveItemInArray } from '@angular/cdk/drag-drop';\r\nimport { FormControl, FormGroup, ReactiveFormsModule, FormsModule, FormBuilder } from '@angular/forms';\r\n\r\n@Component({\r\n  selector: 'bbl-home',\r\n  templateUrl: './home.component.html',\r\n  styleUrls: ['./home.component.scss'],\r\n  providers: [WebsocketService]\r\n})\r\n\r\nexport class HomeComponent implements OnInit {\r\n\r\n  CHAT_URL: string = \"ws://localhost:4200\";\r\n\r\n  audio: any = null;\r\n  video: any = null;\r\n  mirror = true;\r\n  focus: number = null;\r\n  numCols = 1;\r\n  bubbles: Bubble[] = [\r\n    {name: 'one'},\r\n    {name: 'two'},\r\n    {name: 'three'},\r\n  ]\r\n  you: Tile = {text: 'You', cols: 1, rows: 1, color: 'lightblue', index: 0};\r\n  tiles: Tile[] = [\r\n    this.you,\r\n    {text: '1', cols: 1, rows: 1, color: 'lightblue', index: 1},\r\n    {text: '2', cols: 1, rows: 1, color: 'lightgreen', index: 2},\r\n    {text: '3', cols: 1, rows: 1, color: 'lightpink', index: 3},\r\n    {text: '4', cols: 1, rows: 1, color: 'lavender', index: 4},\r\n  ]\r\n  newBubbleForm = this._fb.group({\r\n    newBubble: [''],\r\n  });\r\n\r\n  oldBubbleForm = this._fb.group({\r\n    oldBubble: [''],\r\n  });\r\n\r\n  constructor(\r\n    private _rtc: RtcService,\r\n    private _fb: FormBuilder,\r\n    private _rtc2: Rtc2Service,\r\n    wsService: WebsocketService\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.numCols = Math.floor(window.innerWidth / 320);\r\n  }\r\n\r\n  @HostListener('window:resize', ['$event'])\r\n  onResize(event) {\r\n    this.numCols = Math.floor(event.target.innerWidth / 320);\r\n    this.tiles[0].cols = this.numCols;\r\n  }\r\n\r\n  drop(event: CdkDragDrop<Bubble[]>) {\r\n    moveItemInArray(this.bubbles, event.previousIndex, event.currentIndex);\r\n  }\r\n\r\n\r\n  toggleAudio() {\r\n    if(this.audio) {\r\n      this._rtc.removeSelfAudio();\r\n      this.audio = null;\r\n    }\r\n    else {\r\n      this._rtc.connectSelfAudio();\r\n      this.audio = this._rtc.self.audio;\r\n    }\r\n  }\r\n\r\n  toggleVideo() {\r\n    if(this.video) {\r\n      this._rtc.removeSelfVideo();\r\n      this.video = null;\r\n      let pageVideo = document.querySelector(\".your-video\") as HTMLVideoElement;\r\n      pageVideo.srcObject = null;\r\n      pageVideo.play()\r\n    }\r\n    else {\r\n      this._rtc.connectSelfVideo();\r\n      this.video = this._rtc.self.video;\r\n      let pageVideo = document.querySelector(\".your-video\") as HTMLVideoElement;\r\n      pageVideo.srcObject = this.video;\r\n      pageVideo.play()\r\n    }\r\n  }\r\n\r\n  addTile() {\r\n    this.tiles.push({\r\n      text: `${this.tiles.length + 1}`,\r\n      cols: 1,\r\n      rows: 1,\r\n      color: 'lavender',\r\n      index: this.tiles.length\r\n    } as Tile)\r\n  }\r\n\r\n  refocus(i: number) {\r\n    this.unfocus();\r\n    this.focus = i;\r\n    this.tiles[i].cols = this.numCols;\r\n    this.tiles[i].rows = 2;\r\n    let temp = this.tiles[i];\r\n    this.tiles.splice(0, 0, this.tiles.splice(i, 1)[0]);\r\n  }\r\n\r\n  unfocus() {\r\n    if (this.focus === null) {\r\n      return;\r\n    }\r\n    this.tiles[0].cols = 1;\r\n    this.tiles[0].rows = 1;\r\n    this.tiles.splice(this.focus, 0, this.tiles.splice(0, 1)[0]);\r\n    this.focus = null;\r\n  }\r\n\r\n  addBubble(name: string = \"\") {\r\n    if(!name) {\r\n      if (!this.newBubbleForm.get(\"newBubble\")){\r\n        return;\r\n      }\r\n      name = this.newBubbleForm.get(\"newBubble\").value;\r\n    }\r\n    this.bubbles.push({\r\n      name: name\r\n    } as Bubble);\r\n    this.newBubbleForm.get(\"newBubble\").setValue('');\r\n  }\r\n\r\n\r\n  joinOldBubble(name: string = \"\"){\r\n    if(!name) {\r\n      if (!this.oldBubbleForm.get(\"oldBubble\")){\r\n        return;\r\n      }\r\n      name = this.oldBubbleForm.get(\"oldBubble\").value;\r\n    }\r\n\r\n    for(let i=0; i<this.bubbles.length; i++){\r\n      if(name===this.bubbles[i].name){\r\n        //make connection\r\n        fetch(\"usersInRoom\")\r\n        .then(response => response.json())\r\n        .then(usersinroom => {\r\n          usersinroom.array.forEach(element => {\r\n            //add these users who are in the room to person's screen who is just joining\r\n            this._rtc2.resetPeers(name);\r\n          });\r\n        })\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n  activateRTC() {\r\n    this.video = this._rtc2.self.video;\r\n    let pageVideo = document.querySelector(\".your-video\") as HTMLVideoElement;\r\n    pageVideo.srcObject = this.video;\r\n    pageVideo.play()\r\n    for (let i = 0; i < this._rtc2.clients.length; i++) {\r\n      if (this.tiles.length + 1 < this._rtc2.clients.length){\r\n        this.tiles.push({text: `${i}`, cols: 1, rows: 1, color: 'lightblue', index: i} as Tile);\r\n      }\r\n      this.tiles[i + 1].stream = this._rtc2.clients[i].video;\r\n      let clientVideo = document.querySelector(`.client-${i+1}-video`) as HTMLVideoElement\r\n      clientVideo.srcObject = this._rtc2.clients[i].video;\r\n      clientVideo.play();\r\n    }\r\n  }\r\n\r\n  debug() {\r\n    debugger;\r\n  }\r\n\r\n}\r\n","<p>Welcome to Bubble! This application allows users to join bubbles and start chatting!</p>\r\n\r\n<a mat-flat-button color=\"primary\" href=\"/auth/GitHub\">Login with GitHub</a>\r\n\r\n<br>\r\n<h2>Bubbles</h2>\r\n<mat-chip-list class=\"example-chip\" cdkDropList cdkDropListOrientation=\"horizontal\" (cdkDropListDropped)=\"drop($event)\">\r\n    <mat-chip class=\"example-box\" cdkDrag *ngFor=\"let bubble of bubbles\" (click)=\"addBubble(bubble.name)\">\r\n        {{bubble.name}}\r\n    </mat-chip>\r\n</mat-chip-list>\r\n\r\n<form [formGroup]=\"newBubbleForm\">\r\n    <mat-form-field>\r\n        <mat-label>New Bubble</mat-label>\r\n        <input matNativeControl matInput formControlName=\"newBubble\" />\r\n    </mat-form-field>\r\n    <button mat-button (click)=\"addBubble()\" [disabled]=\"!newBubbleForm.get('newBubble').value\">\r\n    <mat-icon>add</mat-icon>\r\n  </button>\r\n</form>\r\n\r\n<form [formGroup]=\"oldBubbleForm\">\r\n    <mat-form-field>\r\n        <mat-label>Join an existing Bubble! Enter the Bubble name here: </mat-label>\r\n        <input matNativeControl matInput formControlName=\"oldBubble\" />\r\n    </mat-form-field>\r\n    <button mat-button (click)=\"joinOldBubble()\" [disabled]=\"!oldBubbleForm.get('oldBubble').value\">\r\n    <mat-icon>add</mat-icon>\r\n  </button>\r\n</form>\r\n\r\n<h2>Socket Tests</h2>\r\n<button mat-button (click)=\"activateRTC()\">Connect</button>\r\n<button mat-flat-button (click)=\"debug()\" color=\"warn\">Debug</button>\r\n\r\n<h2>\r\n    Videos\r\n    <button mat-button (click)=addTile()>\r\n    <mat-icon>add</mat-icon>\r\n  </button>\r\n</h2>\r\n<mat-grid-list [cols]=\"numCols\">\r\n    <mat-grid-tile *ngFor=\"let tile of tiles; let i = index\" [colspan]=\"tile.cols\" [rowspan]=\"tile.rows\" [style.background]=\"tile.color\">\r\n        <br>\r\n\r\n        <!-- You -->\r\n        <div *ngIf=\"tile.index === 0\">\r\n            <video class=\"your-video\" [ngClass]=\"{'mirror' : mirror}\"></video>\r\n        </div>\r\n\r\n        <!-- Them -->\r\n        <div *ngIf=\"tile.index !== 0\">\r\n            <video class=\"client-{{i}}-video\"></video>\r\n        </div>\r\n\r\n        <mat-grid-tile-footer>\r\n            <p>{{tile.text}}</p>\r\n            <button *ngIf=\"tile.cols === 1\" mat-button (click)=\"refocus(tile.index)\">\r\n        <mat-icon>fullscreen</mat-icon>\r\n      </button>\r\n            <button *ngIf=\"tile.cols !== 1\" mat-button (click)=\"unfocus()\">\r\n        <mat-icon>fullscreen_exit</mat-icon>\r\n      </button>\r\n\r\n            <!-- You -->\r\n            <div *ngIf=\"tile.index === 0\">\r\n                <button mat-button (click)=\"toggleAudio()\">\r\n          <mat-icon>{{audio? 'mic_off' : 'mic'}}</mat-icon>\r\n        </button>\r\n                <button mat-button (click)=\"toggleVideo()\">\r\n          <mat-icon>{{video? 'videocam_off' : 'videocam'}}</mat-icon>\r\n        </button>\r\n                <!-- <mat-slide-toggle [checked]=\"mirror\">Mirror</mat-slide-toggle> -->\r\n            </div>\r\n            <!-- End You -->\r\n        </mat-grid-tile-footer>\r\n    </mat-grid-tile>\r\n</mat-grid-list>","export class PeerData {\r\n  peer: any;\r\n  audio: any;\r\n  video: any;\r\n\r\n  constructor(peer: any, audio=null, video=null) {\r\n    this.peer = peer;\r\n    this.audio = audio;\r\n    this.video = video;\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport defaultExport, * as SimplePeer from 'node_modules/simple-peer/simplepeer.min.js';\r\nimport { PeerData } from '../model/PeerData.model';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class RtcService {\r\n  self: any;\r\n  clients: PeerData[] = [];\r\n\r\n  constructor() {\r\n    this.self = new PeerData( new SimplePeer({initiator: true}) );\r\n    this.test();\r\n  }\r\n\r\n  addPeer() {\r\n    let newPeer = new SimplePeer();\r\n    newPeer.on('signal', data => {\r\n      this.self.peer.signal(data);\r\n    });\r\n    this.self.peer.on('signal', data => {\r\n      newPeer.signal(data);\r\n    });\r\n    this.clients.push(new PeerData(newPeer));\r\n  }\r\n\r\n  connectSelf(audio: boolean, video: boolean) {\r\n    navigator.mediaDevices.getUserMedia({\r\n      video: video,\r\n      audio: audio\r\n    }).then((stream) => this.self.peer.addStream(stream)).catch(err => {\r\n      console.error(`Error connecting media: ${err}`);\r\n    });\r\n  }\r\n\r\n  connectSelfVideo() {\r\n    navigator.mediaDevices.getUserMedia({\r\n      video: true,\r\n      audio: false\r\n    }).then((stream) => {\r\n      this.self.peer.addStream(stream);\r\n      this.self.video = stream;\r\n    }).catch(err => {\r\n      console.error(`Error connecting media: ${err}`);\r\n    });\r\n  }\r\n\r\n  connectSelfAudio() {\r\n    navigator.mediaDevices.getUserMedia({\r\n      video: false,\r\n      audio: true\r\n    }).then((stream) => {\r\n      this.self.peer.addStream(stream);\r\n      this.self.audio = stream;\r\n    }).catch(err => {\r\n      console.error(`Error connecting media: ${err}`);\r\n    });\r\n  }\r\n\r\n  removeSelfAudio() {\r\n    this.self.peer.removeStream(this.self.audio);\r\n  }\r\n\r\n  removeSelfVideo() {\r\n    this.self.peer.removeStream(this.self.video);\r\n  }\r\n\r\n  getPeerVideo(i: number) {\r\n    this.clients[i].peer.on('stream', stream => {\r\n      this.clients[i].video = stream;\r\n    });\r\n  }\r\n\r\n  test() {\r\n    this.addPeer();\r\n\r\n    this.self.peer.on('connect', () => {\r\n      // wait for 'connect' event before using the data channel\r\n      this.self.peer.send('hey peer2, how is it going?');\r\n    });\r\n\r\n    this.clients[0].peer.on('data', data => {\r\n      // got a data channel message\r\n      console.log('got a message from peer1: ' + data);\r\n    });\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport defaultExport, * as SimplePeer from 'node_modules/simple-peer/simplepeer.min.js';\r\nimport { PeerData } from '../model/PeerData.model';\r\nimport { UsersInRoomResponse } from '../model/UsersInRoomResponse.model';\r\nimport { HttpClient } from '@angular/common/http';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class Rtc2Service {\r\n  self: PeerData;\r\n  clients: PeerData[] = [];\r\n  ws: WebSocket;\r\n  id: string = null;\r\n\r\n  constructor(private http: HttpClient) {\r\n    this.setUpEverything();\r\n  }\r\n\r\n  getVideo() {\r\n    return this.self.video;\r\n  }\r\n\r\n  getClients(bubbleName) {\r\n    return this.http.post('usersInRoom', {\r\n      bubbleName\r\n    });\r\n  }\r\n\r\n  resetPeers(bubbleName) {\r\n    this.getClients(bubbleName).subscribe({\r\n      next: (response: UsersInRoomResponse) => {\r\n        if(!this.id && response.id) {\r\n          this.id = response.id;\r\n        }\r\n        if(this.clients.length) {\r\n          // TODO: Destroy all clients\r\n          this.clients = [];\r\n        }\r\n        // for(let i = 0; i < response.listOfClients.length; i++) {\r\n        {\r\n          let newPeer = new SimplePeer();\r\n          newPeer.send('hi peer2, this is peer1')\r\n\r\n          newPeer.on('connect', data => {\r\n            newPeer.send('hi peer2, this is peer1, but in the connect block');\r\n          });\r\n          newPeer.on('data', data => {\r\n            newPeer.send(`Got some data: `);\r\n          });\r\n          newPeer.on('signal', data => {\r\n            newPeer.send('New peer just got signaled?');\r\n          });\r\n          // Make a new peer\r\n          // When a 'signal' offer is generated, send the server the id\r\n          // of the client who should receive the offer\r\n            // That way each client knows who made every request\r\n        }\r\n      },\r\n      error: err => {\r\n\r\n      }\r\n    })\r\n  }\r\n\r\n  setUpEverything() {\r\n    const socketReady = new Promise((resolve, reject) => {\r\n      let constr = null;\r\n      constr = `wss://${window.location.host}`;\r\n      if (window.location.hostname === \"localhost\"){\r\n        constr = `ws://${window.location.host}`;\r\n      }\r\n      this.ws = new WebSocket(constr);\r\n\r\n      this.ws.onopen = () => {\r\n\r\n        this.ws.onmessage = __msg => {\r\n          const msg = JSON.parse(__msg.data)\r\n          if (msg.address === 'connect') {\r\n            resolve(msg.initiator)\r\n          } else {\r\n            this.self.peer.signal(msg);\r\n          }\r\n        };\r\n      };\r\n    });\r\n\r\n    // get video/voice stream as Promise\r\n    const avReady = navigator.mediaDevices.getUserMedia({\r\n      video: true,\r\n      audio: true\r\n    });\r\n\r\n    Promise.all([avReady, socketReady]).then(values => {\r\n      const stream = values[0];\r\n\r\n      this.self = new PeerData(new SimplePeer({\r\n        initiator: values[1],\r\n        trickle: false,\r\n        stream\r\n      }));\r\n      this.self.video = stream;\r\n\r\n      this.self.peer.on(\"signal\", data => {\r\n        console.log(\"making connection\");\r\n        this.ws.send(JSON.stringify(data));\r\n      });\r\n\r\n      this.self.peer.on(\"stream\", stream => {\r\n        let pd = new PeerData(new SimplePeer({\r\n          initiator: false,\r\n          stream\r\n        }));\r\n        pd.video = stream;\r\n        this.clients.push(pd);\r\n\r\n        // Remove from array when connection closes???\r\n        pd.peer.on(\"close\", () => {\r\n          for (let i = 0; i < this.clients.length; i++){\r\n            if (this.clients[i] === pd) {\r\n              this.clients.splice(i, 1);\r\n            }\r\n          }\r\n        });\r\n      });\r\n    });\r\n  }\r\n}\r\n","import { Injectable } from \"@angular/core\";\r\nimport { Subject, Observable, Observer } from 'rxjs';\r\n\r\n@Injectable()\r\nexport class WebsocketService {\r\n  constructor() {}\r\n\r\n  private subject: Subject<MessageEvent>;\r\n\r\n  public connect(url): Subject<MessageEvent> {\r\n    if (!this.subject) {\r\n      this.subject = this.create(url);\r\n      console.log(\"Successfully connected: \" + url);\r\n    }\r\n    return this.subject;\r\n  }\r\n\r\n  private create(url): Subject<MessageEvent> {\r\n    let ws = new WebSocket(url);\r\n\r\n    let observable = Observable.create((obs: Observer<MessageEvent>) => {\r\n      ws.onmessage = obs.next.bind(obs);\r\n      ws.onerror = obs.error.bind(obs);\r\n      ws.onclose = obs.complete.bind(obs);\r\n      return ws.close.bind(ws);\r\n    });\r\n    let observer = {\r\n      next: (data: Object) => {\r\n        if (ws.readyState === WebSocket.OPEN) {\r\n          ws.send(JSON.stringify(data));\r\n        }\r\n      }\r\n    };\r\n    return Subject.create(observer, observable);\r\n  }\r\n}","// This file can be replaced during build by using the `fileReplacements` array.\r\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\r\n// The list of file replacements can be found in `angular.json`.\r\n\r\nexport const environment = {\r\n  production: false\r\n};\r\n\r\n/*\r\n * For easier debugging in development mode, you can import the following file\r\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\r\n *\r\n * This import should be commented out in production mode because it will have a negative impact\r\n * on performance if an error is thrown.\r\n */\r\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\r\n","import { enableProdMode } from '@angular/core';\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app/app.module';\r\nimport { environment } from './environments/environment';\r\n\r\nif (environment.production) {\r\n  enableProdMode();\r\n}\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule)\r\n  .catch(err => console.error(err));\r\n"],"sourceRoot":"webpack:///"}