{"version":3,"sources":["API.js","screens/home.js","components/content_feed.js","components/drawing_feed_item.js","screens/user_drawings.js","screens/published_drawings.js","screens/draw.js","App.js","serviceWorker.js","index.js"],"names":["axios","Axios","create","withCredentials","headers","Accept","handle_error","err","caller","Error","stack","split","trim","console","error","nan","this","auth_url","auth_check_url","authenticated","auth_callbacks","user","token","params","id_token","get","then","res","status","auth_callback","data","catch","fcn","push","forEach","url","Object","assign","post","put","delete","page","limit","result","length","undefined","authenticate","uploader","title","file","form","FormData","append","id","artist","canvas_data","published","saveImage","images","sourceCanvases","document","getElementsByTagName","i","destinationCanvas","createElement","height","width","destinationContext","getContext","drawImage","globalCompositeOperation","fillStyle","fillRect","toDataURL","log","responseGoogle","response","login_callback","tokenId","API","Home","state","title_anim","anim_state","quote_ref","React","createRef","login_button","clientId","buttonText","onSuccess","onFailure","cookiePolicy","on_file_upload","bind","items","props","states","selected","setTimeout","setState","redirect","add_auth_listener","car","get_carousel","item_datas","map","item","key","saveData","hideGrid","disabled","hideInterface","immediateLoading","carousel_items","location","pathname","Carousel","Item","className","src","alt","Caption","from","to","carousel","Container","fluid","Row","Col","style","display","Component","withRouter","ContentFeed","auth_required","has_more","is_loading","feed_path","ItemRender","generator","pager","renderItems","a","next","entries","concat","value","done","Render","buffer","renderItem","feed","overflow","ref","scrollParentRef","pageStart","loadMore","hasMore","loader","Spinner","animation","variant","getScrollParent","threshold","DeleteModal","useState","show","setShow","on_delete","delete_callback","handleClose","onClick","Modal","onHide","Header","closeButton","Title","Body","Footer","Button","delete_drawing","DrawingFeedItem","owned","user_id","_id","deleted","canvas","loadSaveData","loadTimeOffset","edit_btn","delete_btn","cursor","xs","span","offset","onMouseEnter","canvasDraw","canvasWidth","canvasHeight","UserDrawings","Gallery","DrawScreen","color","secondColor","eraser","brushRadius","appear","onFormSubmit","handleChange","handleChangeComplete","titleInput","type","required","defaultValue","onChange","e","target","artistInput","saveableCanvas","localStorage","setItem","colors","hex","preventDefault","content","getSaveData","submit_drawing","update_drawing","alert","JSON","stringify","eraserText","onChangeComplete","position","left","top","clear","undo","min","max","parseInt","Form","onSubmit","Group","controlId","Label","Switch","checked","label","brushColor","loadableCanvas","getItem","history","createBrowserHistory","App","sign_out","nextProps","nextState","keys","check_auth","user_name","name","replace","window","reload","my_uploads_link","name_display","Nav","Link","as","NavLink","name_text","Navbar","Text","bg","sticky","expand","Brand","Toggle","aria-controls","Collapse","exact","path","render","Boolean","hostname","match","ReactDOM","getElementById","navigator","serviceWorker","ready","registration","unregister","message"],"mappings":"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","file":"static/js/main.b1f641fb.chunk.js","sourcesContent":["import Axios from 'axios'\n\n// const baseURL = 'http://brycecorbitt.ddns.net/a3-brycecorbitt'\n\nconst axios  = Axios.create({\n\twithCredentials: true,\n\theaders: {\n\t\tAccept: 'application/json'\n\t},\n\t// baseURL: 'http://mbsr.wpi.edu:40404'\n})\n\nconst handle_error = function(err){\n\ttry {\n\t\tconst caller = (new Error()).stack.split('\\n')[2].trim().split(' ')[1]\n\t\tconsole.error(`Error in API.${caller}: ${err}`)\n\t}\n\tcatch(nan){\n\t\tconsole.error('An unexpected error occured in API.\\n', err)\n\t}\n}\n\n\nclass API {\n\tconstructor(){\n\t\tthis.auth_url = '/auth/callback'\n\t\tthis.auth_check_url = '/auth/check'\n\t\tthis.authenticated = false\n\t\tthis.auth_callbacks = []\n\t\tthis.user = null\n\t}\n\n\tauthenticate(token){\n\t\tlet params = {id_token: token}\n\t\tthis.get(this.auth_url, {params: params}).then((res) => {\n\t\t\tif(res.status !== 200) {\n\t\t\t\tconsole.error(res.data)\n\t\t\t\treturn\n\t\t\t}\n\t\t\tthis.auth_callback(res.data.user)\n\t\t})\n\t}\n\n\tcheck_auth(){\n\t\tthis.get(this.auth_check_url).then(res => {\n\t\t\tif(res.status === 200 && res.data.authenticated !== false){\n\t\t\t\tthis.auth_callback(res.data)\n\t\t\t}\n\t\t}).catch(handle_error)\n\t}\n\n\tadd_auth_listener(fcn){\n\t\tif(this.authenticated){\n\t\t\tfcn(this.user)\n\t\t\treturn\n\t\t}\n\t\tthis.auth_callbacks.push(fcn)\n\t}\n\n\tauth_callback(user){\n\t\tthis.user = user\n\t\tthis.authenticated = true\n\t\tthis.auth_callbacks.forEach(fcn => {\n\t\t\tfcn(user)\n\t\t})\n\t}\n\n\tasync get(url, params={}){\n\t\treturn await axios.get(url, params).catch(handle_error)\n\t}\n\n\tasync post(url, data, params={}){\n\t\tparams = Object.assign({headers: { 'Content-Type': 'application/json' }}, params)\n\t\treturn await axios.post(url, data, params).catch(handle_error)\n\t}\n\n\tasync put(url, data, params={}){\n\t\tparams = Object.assign({headers: { 'Content-Type': 'application/json' }}, params)\n\t\treturn await axios.put(url, data, params).catch(handle_error)\n\t}\n\n\tasync delete(url, params={}){\n\t\treturn await axios.delete(url, params).catch(handle_error)\n\t}\n\n\tasync *pager(url, page=1, limit=10) {\n\t\twhile (true) {\n\t\t\tconst params = {params: {page: page, limit: limit}}\n\t\t\tconst result = await this.get(url, params)\n\t\t\tpage++\n\n\t\t\tif(result.status != 200) {\n\t\t\t\thandle_error(result.data)\n\t\t\t\treturn []\n\t\t\t}\n\t\t\tif(result.data.length < limit) {\n\t\t\t\treturn result.data\n\t\t\t}\n\n\t\t\tyield result.data\n\t\t}\n\t\t\n\t}\n\n\tasync get_user(){\n\t\tconst result = await this.get('/auth/user')\n\t\tif('error' in result || result.status !== 200) {\n\t\t\treturn undefined\n\t\t}\n\t\tif(!this.authenticated) {\n\t\t\tthis.authenticate(result.data.user)\n\t\t}\n\t}\n\n\tasync submit_file(uploader, title, file) {\n\t\tconst params = {headers: {'Content-Type': 'multipart/form-data'}}\n\t\tconst form = new FormData()\n\t\tform.append('uploader', uploader)\n\t\tform.append('title', title)\n\t\tform.append('file', file)\n\t\treturn await this.post('/uploads', form, params).catch(handle_error)\n\t}\n\n\tasync update_file(id, uploader, title){\n\t\tconst url = '/uploads/' + id\n\t\tconst data = {uploader: uploader, title: title}\n\t\treturn await this.put(url, data).catch(handle_error)\n\t}\n\n\tasync get_drawing(id){\n\t\tconst url = '/drawings/' + id\n\t\treturn await this.get(url).catch(handle_error)\n\t}\n\n\tasync get_carousel(){\n\t\treturn await this.get('/drawings/carousel').catch(handle_error)\n\t}\n\n\tasync submit_drawing(artist, title, canvas_data, published=false) {\n\t\tconst data = {artist: artist, title: title, canvas_data: canvas_data, published: published}\n\t\treturn await this.post('/drawings', data).catch(handle_error)\n\t}\n\n\tasync update_drawing(id, artist, title, canvas_data, published){\n\t\tconst url = '/drawings/' + id\n\t\tconst data = {artist: artist, title: title, canvas_data: canvas_data, published: published}\n\t\treturn await this.put(url, data).catch(handle_error)\n\t}\n\n\tasync delete_drawing(id){\n\t\tconst url = '/drawings/' + id\n\t\tconst res = await this.delete(url)\n\t\tif(res.status != 200) {\n\t\t\thandle_error(res.data)\n\t\t\treturn false\n\t\t}\n\t\treturn true\n\t}\n\n\tasync sign_out(){\n\t\tif(!this.authenticated) {\n\t\t\treturn true\n\t\t}\n\t\treturn this.get('/auth/signout').then((res) => {\n\t\t\tif (res.status != 200)\n\t\t\t\treturn false\n\t\t\tthis.authenticated = false\n\t\t\tthis.user = null\n\t\t\treturn true\n\t\t})\n\t}\n\n\tasync delete_upload(id){\n\t\tconst url = '/uploads/' + id\n\t\tconst res = await this.delete(url)\n\t\tif(res.status != 200) {\n\t\t\thandle_error(res.data)\n\t\t\treturn false\n\t\t}\n\t\treturn true\n\t}\n\n}\n\nexport default new API()","import React from 'react'\nimport {Container, Row, Col, Carousel} from 'react-bootstrap'\nimport FadeIn from 'react-fade-in'\nimport {Redirect} from 'react-router-dom'\nimport {GoogleLogin} from 'react-google-login'\nimport {withRouter} from 'react-router-dom'\nimport CanvasDraw from 'react-canvas-draw'\n\nimport API from '../API'\n\nfunction saveImage() {\n\tconst images = []\n\tvar sourceCanvases = document.getElementsByTagName('canvas')\n\tfor (let i = 1; i < sourceCanvases.length; i+=4){\n\t\tvar destinationCanvas = document.createElement('canvas')\n\t\tdestinationCanvas.height = sourceCanvases[i].height\n\t\tdestinationCanvas.width = sourceCanvases[i].width\n\n\t\tvar destinationContext = destinationCanvas.getContext('2d')\n\n\t\tdestinationContext.drawImage(sourceCanvases[i], 0, 0)\n\t\tdestinationContext.globalCompositeOperation = 'destination-over'\n\t\tdestinationContext.fillStyle = 'black'\n\t\tdestinationContext.fillRect(0, 0, destinationCanvas.width, destinationCanvas.height)\n\t\timages.push(destinationCanvas.toDataURL('image/png'))\n\t}\n\tconsole.log(images)\n\treturn images\n}\n\nconst responseGoogle = (response) => {\n\tconsole.error(response)\n}\n\nconst login_callback = (response) => {\n\tconst token = response.tokenId\n\tAPI.authenticate(token)\n}\n\nclass Home extends React.Component {\n\tconstructor(){\n\t\tsuper()\n\t\tthis.state = { title_anim: false, anim_state: 0, authenticated: API.authenticated }\n\t\tthis.quote_ref = React.createRef()\n\t\tthis.login_button = \n\t\t(<GoogleLogin\n\t\t\tclientId=\"772498714969-serroucg6ud4ns0038efpc5gdsefgm8d.apps.googleusercontent.com\"\n\t\t\tbuttonText=\"Login with Google\"\n\t\t\tonSuccess={login_callback}\n\t\t\tonFailure={responseGoogle}\n\t\t\tcookiePolicy={'single_host_origin'}\n\t\t/>)\n\t\tthis.on_file_upload = this.on_file_upload.bind(this)\n\t\tthis.items = null\n\t}\n\n\ton_file_upload(user){\n\t\tif(!('/user' in this.props.states))\n\t\t\tthis.props.states['/user'] = {}\n\t\tthis.props.states['/user'].selected = user\n\t\tsetTimeout(() => {this.setState({redirect: true})}, 0)\n\t}\n\n\tasync componentDidMount(){\n\t\tAPI.add_auth_listener(() => {\n\t\t\tthis.setState({authenticated: true, car: 0})\n\t\t})\n\t\tAPI.get_carousel().then((item_datas) => {\n\t\t\tthis.items = item_datas.data.map((item, i) => {\n\t\t\t\treturn <CanvasDraw key={i} saveData={item.canvas_data} hideGrid={true} disabled={true} hideInterface={true} immediateLoading={true} />\n\t\t\t})\n\t\t\tthis.setState({carousel_items: item_datas.data, car: 1},  () => {setTimeout(() => {const images = saveImage()\n\t\t\t\tthis.setState({car: 2, images: images})}, 100)})\n\t\t})\n\t\tlet state = this.props.states[this.props.location.pathname]\n\t\tif(state !== undefined){\n\t\t\tawait this.setState(state)\n\t\t}\n\t\t// if(!this.state.title_anim) {\n\t\t// \tthis.title_animation()\n\t\t// }\n\t}\n\n\tget_carousel(){\n\t\tif(this.state.images == null)\n\t\t\treturn null\n\t\tconsole.log(this.state.carousel_items)\n\t\tconst items = this.state.carousel_items.map((item, i) => {\n\t\t\treturn (<Carousel.Item key={i}>\n\t\t\t\t<img\n\t\t\t\t\tclassName=\"carousel-img\"\n\t\t\t\t\tsrc={this.state.images[i]}\n\t\t\t\t\talt={item.title}\n\t\t\t\t/>\n\t\t\t\t<Carousel.Caption>\n\t\t\t\t\t<h3><i>&quot;{item.title}&quot;</i></h3>\n\t\t\t\t\t<p><i>by <strong>{item.artist}</strong></i></p>\n\t\t\t\t</Carousel.Caption>\n\t\t\t</Carousel.Item>)\n\t\t})\n\t\treturn <Carousel>{items}</Carousel>\n\t}\n\n\tcomponentWillUnmount(){\n\t\tconst {pathname} = this.props.location\n\t\tthis.props.states[pathname] = this.state\n\t\tObject.assign(this.props.states[pathname], {title_anim: true, anim_state: 2, redirect: false})\n\t}\n\n\trender() {\n\t\tlet login_button = null\n\t\tlet redirect = null\n\t\tlet items = null\n\t\tif (this.state.car != 2)\n\t\t\titems = this.items\n\t\tif(!this.state.authenticated){\n\t\t\tlogin_button = this.login_button\n\t\t}\n\n\t\tif(this.state.redirect === true){\n\t\t\tredirect = <Redirect from=\"/\" to=\"/user\"/>\n\t\t}\n\n\t\tconst carousel = this.get_carousel()\n\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<FadeIn><h1 className=\"text-center the-title\">Drawsome</h1></FadeIn>\n\t\t\t\t<FadeIn>{carousel}</FadeIn>\n\t\t\t\t<Container fluid>\n\t\t\t\t\t<Row className=\"justify-content-md-center\">\n\t\t\t\t\t\t<Col id=\"login-button\" className=\"text-center\">{login_button}</Col>\n\t\t\t\t\t</Row>\n\t\t\t\t\t{redirect}\n\t\t\t\t</Container>\n\t\t\t\t<div style={{display: 'hidden'}} className=\"get-rid-of-me\">\n\t\t\t\t\t{items}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nexport default withRouter(Home)","import React from 'react'\nimport {Spinner} from 'react-bootstrap'\nimport {withRouter} from 'react-router-dom'\nimport InfiniteScroll from 'react-infinite-scroller'\n\nimport API from '../API'\n\nclass ContentFeed extends React.Component {\n\tconstructor(props){\n\t\tsuper(props)\n\t\tconst auth_required = props.auth_required == undefined? true : props.auth_required\n\t\tthis.state = {auth_required: auth_required, authenticated: false, items: [], has_more: true, is_loading: true}\n\t\tthis.feed_path = props.feed_path\n\t\tthis.ItemRender = this.props.ItemRender\n\t\tthis.generator = API.pager(props.feed_path)\n\t\tthis.renderItems = this.renderItems.bind(this)\n\t}\n\n\tasync componentDidMount(){\n\n\t\tAPI.add_auth_listener(async () => {\n\t\t\tawait this.setState({authenticated: true})\n\t\t})\n\t}\n\n\tasync page(){\n\t\tconst entries = await this.generator.next()\n\t\tconst items = this.state.items.concat(entries.value)\n\t\tthis.setState({ items: items, has_more: !entries.done})\n\t}\n\n\trenderItem(key, data){\n\t\tif(!data)\n\t\t\treturn null\n\t\tconst Render = this.ItemRender\n\t\treturn <div key={key}><Render data={data}/></div>\n\t}\n\n\trenderItems(){\n\t\tif(!this.state.items || this.state.items === []){\n\t\t\treturn null\n\t\t}\n\t\tconst {items} = this.state\n\t\tconst buffer = []\n\t\tfor (let i = 0; i < items.length; i++){\n\t\t\tbuffer.push(this.renderItem(i, items[i]))\n\t\t}\n\t\treturn buffer\n\t}\n\n\trender() {\n\t\tlet feed = null\n\t\tlet items = null\n\t\tif(this.state.authenticated || !this.state.auth_required) {\n\t\t\titems = this.renderItems()\n\t\t\tfeed = (\n\t\t\t\t<div id=\"feed\" style={{height: '100%', overflow: 'auto'}} ref={(ref) => this.scrollParentRef = ref}>\n\t\t\t\t\t<InfiniteScroll\n\t\t\t\t\t\tpageStart={1}\n\t\t\t\t\t\tloadMore={this.page.bind(this)}\n\t\t\t\t\t\thasMore={this.state.has_more}\n\t\t\t\t\t\tloader={<div className=\"text-center\" key={-1}><Spinner animation=\"border\" variant=\"dark\"/></div>}\n\t\t\t\t\t\tgetScrollParent={() => this.scrollParentRef}\n\t\t\t\t\t\tthreshold={10}\n\n\t\t\t\t\t>\n\t\t\t\t\t\t{items}\n\t\t\t\t\t</InfiniteScroll>\n\t\t\t\t</div>\n\t\t\t)\n\t\t}\n\t\treturn feed\n\t}\n}\n\nexport default withRouter(ContentFeed)","import React from 'react'\nimport { Container, Row, Col, Modal, Button } from 'react-bootstrap'\nimport { XSquareFill, Pencil } from 'react-bootstrap-icons'\nimport {Redirect} from 'react-router-dom'\nimport API from '../API'\nimport CanvasDraw from 'react-canvas-draw'\n\nfunction DeleteModal(props) {\n\tconst [show, setShow] = React.useState(false)\n\tconst id = props.id\n\tconst title = props.title\n\tconst on_delete = props.delete_callback\n\tconst handleClose = () => setShow(false)\n\tconst handleShow = () => setShow(true)\n\tconst handleDelete = () => {\n\t\tsetShow(false)\n\t\tAPI.delete_drawing(id).then(() => {\n\t\t\tif(on_delete){on_delete()}\n\n\t\t})\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<XSquareFill width=\"32\" height=\"32\" onClick={handleShow} className=\"delete-btn\"/>\n\t\t\t<Modal show={show} onHide={handleClose}>\n\t\t\t\t<Modal.Header closeButton>\n\t\t\t\t\t<Modal.Title>Drawing Deletion: <strong>{title}</strong></Modal.Title>\n\t\t\t\t</Modal.Header>\n\t\t\t\t<Modal.Body>Are you sure you want to delete this masterpiece? ({title})</Modal.Body>\n\t\t\t\t<Modal.Footer>\n\t\t\t\t\t<Button variant=\"secondary\" onClick={handleClose}>\n            No\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button variant=\"danger\" onClick={handleDelete}>\n            Yes\n\t\t\t\t\t</Button>\n\t\t\t\t</Modal.Footer>\n\t\t\t</Modal>\n\t\t</>\n\t)\n}\n\nclass DrawingFeedItem extends React.Component {\n\tconstructor(props){\n\t\tsuper(props)\n\t\tconst {user_id, artist, title, canvas_data, published, _id } = this.props.data\n\t\tlet owned\n\t\tif(API.user && API.user._id)\n\t\t\towned = (API.user._id == user_id)\n\t\tthis.state = {artist: artist, title: title, canvas_data: canvas_data, published: published, _id: _id,\n\t\t\tauthenticated: false, owned: owned, redirect: false, deleted: false}\n\t\tthis.on_delete = this.on_delete.bind(this)\n\t}\n\n\ton_delete(){\n\t\tthis.setState({deleted: true})\n\t}\n\n\tasync componentDidMount(){\n\t\tAPI.add_auth_listener(async (user) => {\n\t\t\tawait this.setState({authenticated: true, owned: this.props.data.user_id == user._id})\n\t\t})\n\t\tthis.canvas.loadSaveData(this.state.canvas_data)\n\t\tthis.canvas.loadTimeOffset = 100\n\t}\n\n\trender(){\n\t\tif(this.state.deleted)\n\t\t\treturn null\n\t\tlet edit_btn = null\n\t\tlet delete_btn = null\n\t\tlet redirect = null\n\t\tconst id = this.state._id\n\t\tif (this.state.owned){\n\t\t\tedit_btn = <Pencil width={32} height={32} style={{cursor: 'pointer'}} onClick={() => {this.setState({redirect: true})}}/>\n\t\t\tdelete_btn = \t<DeleteModal id={this.state._id} title={this.state.title} delete_callback={this.on_delete} />\n\n\t\t}\n\t\tif(this.state.redirect)\n\t\t\tredirect = <Redirect to={{pathname: `/draw/${id}`, state: Object.assign(this.state, {redirect: false})}}/>\n\n\t\treturn (\n\t\t\t<Container className=\"draw-view-container\">\n\t\t\t\t<Row>\n\t\t\t\t\t<Col xs={{span: 3, offset: 4}} className=\"text-center\">\n\t\t\t\t\t\t<h2><i>{this.state.title}</i></h2>\n\t\t\t\t\t\t<h5><i>by <strong>{this.state.artist}</strong></i></h5>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col xs={1}>{edit_btn}</Col>\n\t\t\t\t\t<Col xs={1}>{delete_btn}</Col>\n\t\t\t\t</Row>\n\t\t\t\t<Row>\t\t\t\n\t\t\t\t\t<Col>\n\t\t\t\t\t\t<div className=\"draw-view shadow-lg\" onMouseEnter={() => {this.canvas.loadSaveData(this.state.canvas_data)}}>\n\t\t\t\t\t\t\t<CanvasDraw ref={canvasDraw => (this.canvas = canvasDraw)} className=\"draw-view\" hideGrid={true} disabled={true} canvasWidth={400} canvasHeight={400}\n\t\t\t\t\t\t\t// onChange={(canvas) => { debugger; this.setState({canvas_data: canvas.getSaveData()})}}\n\t\t\t\t\t\t\t\tloadTimeOffset={10}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t{redirect}\n\t\t\t</Container>\n\n\t\t)\n\t}\n}\n\nexport default DrawingFeedItem","import React from 'react'\nimport {Container, Row, Col} from 'react-bootstrap'\nimport {withRouter} from 'react-router-dom'\nimport ContentFeed from '../components/content_feed'\nimport DrawingFeedItem from '../components/drawing_feed_item'\n\nimport API from '../API'\n\nclass UserDrawings extends React.Component {\n\tconstructor(props){\n\t\tsuper(props)\n\t\tthis.state = {authenticated: false}\n\t}\n\n\tasync componentDidMount(){\n\n\t\tAPI.add_auth_listener(async () => {\n\t\t\tawait this.setState({authenticated: true})\n\t\t})\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<Container fluid>\n\t\t\t\t<Row>\n\t\t\t\t\t<Col><h1 id=\"title-string\">My Drawings</h1></Col>\n\t\t\t\t</Row>\n\t\t\t\t<Row className=\"justify-content-center\">\n\t\t\t\t\t<Col>\n\t\t\t\t\t\t<ContentFeed feed_path=\"/drawings/feed/user\" ItemRender={DrawingFeedItem}/>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t</Container>)\n\t}\n}\n\nexport default withRouter(UserDrawings)","import React from 'react'\nimport {Container, Row, Col} from 'react-bootstrap'\nimport {withRouter} from 'react-router-dom'\nimport ContentFeed from '../components/content_feed'\nimport DrawingFeedItem from '../components/drawing_feed_item'\n\nimport API from '../API'\n\nclass Gallery extends React.Component {\n\tconstructor(props){\n\t\tsuper(props)\n\t\tthis.state = {authenticated: false}\n\t}\n\n\tasync componentDidMount(){\n\n\t\tAPI.add_auth_listener(async () => {\n\t\t\tawait this.setState({authenticated: true})\n\t\t})\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<Container fluid>\n\t\t\t\t<Row>\n\t\t\t\t\t<Col><h1 id=\"title-string\">Art Gallery</h1></Col>\n\t\t\t\t</Row>\n\t\t\t\t<Row className=\"justify-content-center\">\n\t\t\t\t\t<Col>\n\t\t\t\t\t\t<ContentFeed auth_required={false} feed_path=\"/drawings/feed/\" ItemRender={DrawingFeedItem}/>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t</Container>)\n\t}\n}\n\nexport default withRouter(Gallery)","import React from 'react'\nimport {Container, Row, Col, Button, Form} from  'react-bootstrap'\nimport CanvasDraw from 'react-canvas-draw'\nimport {Redirect} from 'react-router-dom'\nimport {HuePicker} from 'react-color'\n\nimport API from '../API'\n\nclass DrawScreen extends React.Component {\n\tconstructor(props){\n\t\tsuper(props)\n\t\tthis.state ={\n\t\t\tcolor: '#ff0000',\n\t\t\tsecondColor: '#ff0000',\n\t\t\teraser: false,\n\t\t\tpublished: false,\n\t\t\tbrushRadius: 10,\n\t\t\tappear: true,\n\t\t\tredirect: false,\n\t\t}\n\n\t\tif(props.location && props.location.state)\n\t\t\tObject.assign(this.state, props.location.state)\n\t\t\t\t\t\n\t\t\n\t\tthis.form = React.createRef()\n\t\tthis.onFormSubmit = this.onFormSubmit.bind(this)\n\t\tthis.handleChange = this.handleChange.bind(this)\n\t\tthis.handleChangeComplete = this.handleChangeComplete.bind(this)\n\t\t\t\n\t\tthis.titleInput = (<input type=\"text\" className=\"title-input\" required={true} defaultValue={this.state.title} onChange={(e) => {this.setState({title: e.target.value})}}/>)\n\t\tthis.artistInput = (<input type=\"text\" className=\"artist-input\" required={true} defaultValue={this.state.artist} onChange={(e) => {this.setState({artist: e.target.value})}}/>)\n\t}\n\n\tcomponentDidMount(){\n\t\tconsole.log('hi')\n\t\tif(this.state.canvas_data) {\n\t\t\tthis.saveableCanvas.loadSaveData(this.state.canvas_data)\n\t\t\tlocalStorage.setItem(\n\t\t\t\t'savedDrawing',\n\t\t\t\tthis.state.canvas_data\n\t\t\t)\n\t\t}\n\t}\n\n\tcomponentWillUnmount(){\n\t\tconsole.log('bye')\n\t}\n\n\thandleChangeComplete (colors){\n\t\tthis.setState({color:colors.hex, secondColor:colors.hex})\n\t}\n\n\tasync onFormSubmit(e){\n\t\te.preventDefault()\n\t\tconst content = this.saveableCanvas.getSaveData()\n\t\tconst {artist, title, published} = this.state\n\t\tlet response\n\t\tif(!this.state._id)\n\t\t\tresponse = await API.submit_drawing(artist, title, content, published)\n\t\telse\n\t\t\tresponse = await API.update_drawing(this.state._id, artist, title, content, published)\n\t\t\n\t\tif(response.status != 200 && response.status != 201 && response.status != 304){\n\t\t\talert('Request Failed :(\\n' + JSON.stringify(response.data))\n\t\t\treturn\n\t\t}\n\t\tthis.setState({redirect: true})\n\n\t}\n    \n\thandleChange() {\n\t\tthis.setState({published: !this.state.published}, () =>{\n\t\t\tconsole.log(this.state.published)\n\t\t})\n        \n\t}\n      \n\trender(){\n\t\tlet redirect = null\n\t\tlet eraserText = 'Erase'\n\t\tif (this.state.eraser)\n\t\t\teraserText ='Draw'\n\t\tif(this.state.redirect){\n\t\t\tredirect = <Redirect to={{pathname: '/user'}}/>\n\t\t}\n\t\treturn (\n\t\t\t<Container>\n\t\t\t\t<Row>\n\t\t\t\t\t<Col><h1 id=\"title-string\">Draw</h1></Col>\n\t\t\t\t</Row>\n                \n\t\t\t\t<Row>\n\t\t\t\t\t<Col>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<HuePicker\n\t\t\t\t\t\t\t\tcolor={this.state.color}\n\t\t\t\t\t\t\t\tonChangeComplete={this.handleChangeComplete}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t<Row>\n\t\t\t\t\t<Col>\n\t\t\t\t\t\t<div className= \"classNames tools\">\n                    \n\t\t\t\t\t\t\t<Button \n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tposition: 'absolute',left:'90px',top:'0px'\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\tthis.setState({eraser: !this.state.eraser}, () => {\n\t\t\t\t\t\t\t\t\t\tif (this.state.eraser)\n\t\t\t\t\t\t\t\t\t\t\tthis.setState({color: '#ffffff'})\n\t\t\t\t\t\t\t\t\t\telse this.setState({ color: this.state.secondColor})\n\n\t\t\t\t\t\t\t\t\t})}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{eraserText}\n\t\t\t\t\t\t\t</Button>\n\n\t\t\t\t\t\t\t<Button variant=\"danger\"\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tposition: 'absolute',left:'-90px',top:'0px'\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\tthis.saveableCanvas.clear()\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n                        Clear\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t<Button variant=\"info\"\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tposition: 'absolute',left:'0px',top:'0px'\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\tthis.saveableCanvas.undo()\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n                        Undo\n\t\t\t\t\t\t\t</Button>\n                    \n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<div className=\"text\"> \n                        Brush-Radius:\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"range\"\n\t\t\t\t\t\t\t\t\tmin=\"1\"\n\t\t\t\t\t\t\t\t\tmax=\"50\"\n\t\t\t\t\t\t\t\t\tclassName=\"custom-range\"\n\t\t\t\t\t\t\t\t\tvalue={this.state.brushRadius}\n\t\t\t\t\t\t\t\t\tonChange={e =>\n\t\t\t\t\t\t\t\t\t\tthis.setState({ brushRadius: parseInt(e.target.value, 10) })\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\tposition: 'absolute',left:'-110px',top:'90px'\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n                    \n\t\t\t\t\t\t\t<div className=\"saveTitle\">\n\t\t\t\t\t\t\t\t<h3>Save/Publish Drawing</h3>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t\t\t<Form className=\"form-group\" ref={this.form} onSubmit={this.onFormSubmit}>\n                        \n\t\t\t\t\t\t\t\t\t<div className=\"name\">\n\t\t\t\t\t\t\t\t\t\t<Form.Group controlId=\"name\">\n\t\t\t\t\t\t\t\t\t\t\t<Form.Label className=\"required\">Your Name</Form.Label>\n\t\t\t\t\t\t\t\t\t\t\t{/* <Form.Control type=\"text\" name=\"name\" required/> */}\n\t\t\t\t\t\t\t\t\t\t\t{this.artistInput}\n\t\t\t\t\t\t\t\t\t\t</Form.Group>\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t<div className=\"title\">\n\t\t\t\t\t\t\t\t\t\t<Form.Group controlId=\"title\">\n\t\t\t\t\t\t\t\t\t\t\t<Form.Label className=\"required\">Drawing Title</Form.Label>\n\t\t\t\t\t\t\t\t\t\t\t{/* <Form.Control type=\"text\" name=\"title\" required /> */}\n\t\t\t\t\t\t\t\t\t\t\t{this.titleInput}\n\t\t\t\t\t\t\t\t\t\t</Form.Group>\n\t\t\t\t\t\t\t\t\t</div>\n                       \n\t\t\t\t\t\t\t\t\t<div className=\"submit\">\n\t\t\t\t\t\t\t\t\t\t<Form.Switch \n\t\t\t\t\t\t\t\t\t\t\tchecked={this.state.published}\n\t\t\t\t\t\t\t\t\t\t\tonChange={this.handleChange}\n\t\t\t\t\t\t\t\t\t\t\ttype=\"switch\"\n\t\t\t\t\t\t\t\t\t\t\tid=\"custom-switch\"\n\t\t\t\t\t\t\t\t\t\t\tlabel=\"Publish\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t<Button variant=\"success\" type=\"submit\"\n\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\tposition: 'absolute',left:'70px',top:'250px'\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\tlocalStorage.setItem(\n\t\t\t\t\t\t\t\t\t\t\t\t'savedDrawing',\n\t\t\t\t\t\t\t\t\t\t\t\tthis.saveableCanvas.getSaveData()\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n                                Save\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t</Form>\n\n\t\t\t\t\t\t\t</div>\n                   \n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Col>\n               \n\t\t\t\t\t<Col className=\"text-center\">\n\t\t\t\t\t\t<CanvasDraw className=\"shadow-lg draw-canvas\" hideGrid={true}\n\t\t\t\t\t\t\tref={canvasDraw => (this.saveableCanvas = canvasDraw)}\n\t\t\t\t\t\t\tbrushColor={this.state.color}\n\t\t\t\t\t\t\tbrushRadius={this.state.brushRadius}\n\t\t\t\t\t\t\tcanvasHeight={this.state.height}\n\t\t\t\t\t\t\tcanvasWidth={this.state.width}\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\tposition: 'absolute',left:'-20px',top:'0px'\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Col>\n\n\t\t\t\t\t<Col>\n\t\t\t\t\t\t<Button variant = \"success\"\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\tposition: 'absolute',left:'325px',top:'-50px'\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tthis.loadableCanvas.loadSaveData(\n\t\t\t\t\t\t\t\t\tlocalStorage.getItem('savedDrawing')\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n                    Playback of Saved Drawing\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<CanvasDraw className=\"shadow-lg draw-canvas\" hideGrid={true}\n\t\t\t\t\t\t\tdisabled\n\t\t\t\t\t\t\tref={canvasDraw => (this.loadableCanvas = canvasDraw)}\n\t\t\t\t\t\t\tsaveData={localStorage.getItem('savedDrawing')}\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\tposition: 'absolute',left:'215px',top:'0px'\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t<Row>\n\t\t\t\t\t{redirect}\n\t\t\t\t</Row>\n\t\t\t</Container>\n\t\t)\n\t}\n\n}\n\nexport default DrawScreen","import React from 'react'\nimport { Nav, Navbar } from 'react-bootstrap'\nimport { createBrowserHistory } from 'history'\nimport {\n\tHashRouter as Router,\n\tSwitch,\n\tRoute,\n\tNavLink,\n} from 'react-router-dom'\n\nimport API from './API'\nimport Home from './screens/home'\nimport UserDrawings from './screens/user_drawings'\nimport Gallery from './screens/published_drawings'\nimport DrawScreen from './screens/draw'\n\nimport 'bootswatch/dist/sketchy/bootstrap.min.css'\nimport './App.css'\n\nconst history = createBrowserHistory()\nconst states = {'/': {}, '/user': {}, '/uploads': {}}\n\nclass App extends React.Component{\n\tconstructor(props){\n\t\tsuper(props)\n\t\tthis.state = { authenticated: false }\n\t\tthis.sign_out = this.sign_out.bind(this)\n\t}\n\n\tshouldComponentUpdate(nextProps, nextState){\n\t\tif('authenticated' in nextState && nextState.authenticated != this.state.authenticated) {\n\t\t\tfor(const key of Object.keys(states)){\n\t\t\t\tstates[key]['authenticated'] = nextState.authenticated\n\t\t\t}\n\t\t\treturn true\n\t\t}\n\t}\n\n\tcomponentDidMount(){\n\t\tAPI.check_auth()\n\t\tAPI.add_auth_listener((user) => {\n\t\t\tthis.setState({authenticated: true, user_name: user.name})\n\t\t})\n\t}\n\n\tsign_out(){\n\t\tAPI.sign_out().then((result => {\n\t\t\tif(result === true){\n\t\t\t\tfor(const key of Object.keys(states)){\n\t\t\t\t\tstates[key]['authenticated'] = false\n\t\t\t\t}\n\t\t\t\tthis.setState({authenticated: false}, () => {\n\t\t\t\t\thistory.replace('/', {authenticated: false, title_anim: true, anim_state: 2})\n\t\t\t\t\twindow.location.reload()\n\t\t\t\t})\n\t\t\t}\n\t\t})).catch(err => {console.error(err)})\n\t}\n\n\trender(){\n\t\tlet my_uploads_link = null\n\t\tlet name_display = null\n\t\tlet sign_out = null\n\t\tconst {user_name} = this.state\n\t\tif(this.state.authenticated) {\n\t\t\tmy_uploads_link = (\n\t\t\t\t<Nav.Item>\n\t\t\t\t\t<Nav.Link as={NavLink} to=\"/user\">My Drawings</Nav.Link>\n\t\t\t\t</Nav.Item>)\n\t\t\tconst name_text = `Signed in as ${user_name}`\n\t\t\tname_display = <Navbar.Text id=\"display-name\">{name_text}</Navbar.Text>\n\t\t\tsign_out = (\n\t\t\t\t<Nav.Item>\n\t\t\t\t\t<Nav.Link onClick={this.sign_out}>Sign Out</Nav.Link>\n\t\t\t\t</Nav.Item>\n\t\t\t)\n\t\t}\n\t\treturn (\n\t\t\t<Router history={history}>\n\t\t\t\t<Navbar bg=\"primary\" variant=\"dark\" sticky=\"top\" expand=\"md\" animation=\"true\">\n\t\t\t\t\t<Navbar.Brand as={NavLink} to=\"/\">Drawsome</Navbar.Brand>\n\t\t\t\t\t<Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\n\t\t\t\t\t<Navbar.Collapse>\n\t\t\t\t\t\t<Nav className=\"mr-auto\">\n\t\t\t\t\t\t\t<Nav.Item>\n\t\t\t\t\t\t\t\t<Nav.Link as={NavLink} exact to=\"/\">Home</Nav.Link>\n\t\t\t\t\t\t\t</Nav.Item>\n\t\t\t\t\t\t\t<Nav.Item>\n\t\t\t\t\t\t\t\t<Nav.Link as={NavLink} to=\"/draw\">Draw</Nav.Link>\n\t\t\t\t\t\t\t</Nav.Item>\n\t\t\t\t\t\t\t{my_uploads_link}\n\t\t\t\t\t\t\t<Nav.Item>\n\t\t\t\t\t\t\t\t<Nav.Link as={NavLink} to=\"/gallery\">Gallery</Nav.Link>\n\t\t\t\t\t\t\t</Nav.Item>\n\t\t\t\t\t\t\t{name_display}\n\t\t\t\t\t\t\t{sign_out}\n\t\t\t\t\t\t</Nav>\n\t\t\t\t\t</Navbar.Collapse>\n\t\t\t\t</Navbar>\n\t\n\t\n\t\t\t\t{/* A <Switch> looks through its children <Route>s and\n\t\t\t\t\t\t\trenders the first one that matches the current URL. */}\n\t\t\t\t<Switch>\n\t\t\t\t\t<Route path=\"/user\" render={(props) => (<UserDrawings {...props} states={states}/>)}/>\n\t\t\t\t\t<Route path=\"/gallery\" render={(props) => (<Gallery {...props} states={states}/>)}/>\n\t\t\t\t\t<Route path=\"/draw\" render={(props) => (<DrawScreen {...props} states={states}/>)}/>\n\t\t\t\t\t<Route path=\"/\" exact render={(props) => (<Home {...props} states={states}/>)}/>\n\t\t\t\t</Switch>\n\t\t\t</Router>\n\t\t)\n\t}\n}\n\n\nexport default App\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n\twindow.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n    \t/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n)\n\nexport function register(config) {\n\tif (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n\t\t// The URL constructor is available in all browsers that support SW.\n\t\tconst publicUrl = new URL(process.env.PUBLIC_URL, window.location.href)\n\t\tif (publicUrl.origin !== window.location.origin) {\n\t\t\t// Our service worker won't work if PUBLIC_URL is on a different origin\n\t\t\t// from what our page is served on. This might happen if a CDN is used to\n\t\t\t// serve assets; see https://github.com/facebook/create-react-app/issues/2374\n\t\t\treturn\n\t\t}\n\n\t\twindow.addEventListener('load', () => {\n\t\t\tconst swUrl = `${process.env.PUBLIC_URL}/service-worker.js`\n\n\t\t\tif (isLocalhost) {\n\t\t\t\t// This is running on localhost. Let's check if a service worker still exists or not.\n\t\t\t\tcheckValidServiceWorker(swUrl, config)\n\n\t\t\t\t// Add some additional logging to localhost, pointing developers to the\n\t\t\t\t// service worker/PWA documentation.\n\t\t\t\tnavigator.serviceWorker.ready.then(() => {\n\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n\t\t\t\t\t)\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\t// Is not localhost. Just register service worker\n\t\t\t\tregisterValidSW(swUrl, config)\n\t\t\t}\n\t\t})\n\t}\n}\n\nfunction registerValidSW(swUrl, config) {\n\tnavigator.serviceWorker\n\t\t.register(swUrl)\n\t\t.then(registration => {\n\t\t\tregistration.onupdatefound = () => {\n\t\t\t\tconst installingWorker = registration.installing\n\t\t\t\tif (installingWorker == null) {\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tinstallingWorker.onstatechange = () => {\n\t\t\t\t\tif (installingWorker.state === 'installed') {\n\t\t\t\t\t\tif (navigator.serviceWorker.controller) {\n\t\t\t\t\t\t\t// At this point, the updated precached content has been fetched,\n\t\t\t\t\t\t\t// but the previous service worker will still serve the older\n\t\t\t\t\t\t\t// content until all client tabs are closed.\n\t\t\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t\t\t'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n\t\t\t\t\t\t\t)\n\n\t\t\t\t\t\t\t// Execute callback\n\t\t\t\t\t\t\tif (config && config.onUpdate) {\n\t\t\t\t\t\t\t\tconfig.onUpdate(registration)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// At this point, everything has been precached.\n\t\t\t\t\t\t\t// It's the perfect time to display a\n\t\t\t\t\t\t\t// \"Content is cached for offline use.\" message.\n\t\t\t\t\t\t\tconsole.log('Content is cached for offline use.')\n\n\t\t\t\t\t\t\t// Execute callback\n\t\t\t\t\t\t\tif (config && config.onSuccess) {\n\t\t\t\t\t\t\t\tconfig.onSuccess(registration)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t\t.catch(error => {\n\t\t\tconsole.error('Error during service worker registration:', error)\n\t\t})\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n\t// Check if the service worker can be found. If it can't reload the page.\n\tfetch(swUrl, {\n\t\theaders: { 'Service-Worker': 'script' },\n\t})\n\t\t.then(response => {\n\t\t\t// Ensure service worker exists, and that we really are getting a JS file.\n\t\t\tconst contentType = response.headers.get('content-type')\n\t\t\tif (\n\t\t\t\tresponse.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n\t\t\t) {\n\t\t\t\t// No service worker found. Probably a different app. Reload the page.\n\t\t\t\tnavigator.serviceWorker.ready.then(registration => {\n\t\t\t\t\tregistration.unregister().then(() => {\n\t\t\t\t\t\twindow.location.reload()\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\t// Service worker found. Proceed as normal.\n\t\t\t\tregisterValidSW(swUrl, config)\n\t\t\t}\n\t\t})\n\t\t.catch(() => {\n\t\t\tconsole.log(\n\t\t\t\t'No internet connection found. App is running in offline mode.'\n\t\t\t)\n\t\t})\n}\n\nexport function unregister() {\n\tif ('serviceWorker' in navigator) {\n\t\tnavigator.serviceWorker.ready\n\t\t\t.then(registration => {\n\t\t\t\tregistration.unregister()\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tconsole.error(error.message)\n\t\t\t})\n\t}\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\nimport * as serviceWorker from './serviceWorker'\n\nReactDOM.render(\n\t<App />,\n\tdocument.getElementById('root')\n)\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister()\n"],"sourceRoot":""}